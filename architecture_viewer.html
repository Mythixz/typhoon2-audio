<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Call Center System - Architecture Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .diagram-section {
            margin-bottom: 50px;
            padding: 30px;
            border-radius: 15px;
            background: #f8f9fa;
            border-left: 5px solid #667eea;
        }
        
        .diagram-section h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.8em;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        
        .diagram-section h3 {
            color: #495057;
            margin-top: 25px;
            font-size: 1.4em;
        }
        
        .mermaid {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .description {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .description h4 {
            color: #667eea;
            margin-top: 0;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .tech-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid #667eea;
        }
        
        .tech-card h4 {
            color: #667eea;
            margin-top: 0;
        }
        
        .tech-card ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .tech-card li {
            margin: 5px 0;
        }
        
        .nav-tabs {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        .nav-tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .nav-tab:hover {
            color: #667eea;
            background: #f8f9fa;
        }
        
        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .emoji {
            font-size: 1.2em;
            margin-right: 8px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .diagram-section {
                padding: 20px;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .nav-tab {
                text-align: left;
                border-bottom: 1px solid #e9ecef;
                border-left: 3px solid transparent;
            }
            
            .nav-tab.active {
                border-left-color: #667eea;
                border-bottom-color: #e9ecef;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è AI Call Center System</h1>
            <p>Complete Solution for Hearing Impaired Users - Architecture Diagrams</p>
        </div>
        
        <div class="content">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('overview')">üìä System Overview</button>
                <button class="nav-tab" onclick="showTab('components')">üß© Components</button>
                <button class="nav-tab" onclick="showTab('flow')">üîÑ Data Flow</button>
                <button class="nav-tab" onclick="showTab('deployment')">üöÄ Deployment</button>
                <button class="nav-tab" onclick="showTab('tech')">üõ†Ô∏è Technology</button>
            </div>
            
            <!-- System Overview Tab -->
            <div id="overview" class="tab-content active">
                <div class="diagram-section">
                    <h2>üèä‚Äç‚ôÇÔ∏è Swimlane Architecture Diagram</h2>
                    <p>‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ layer ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö AI Call Center ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</p>
                    <div class="mermaid">
                        graph TB
                            subgraph "User Layer"
                                U[üë§ User - Hearing Impaired]
                                U1[üì± Mobile User]
                                U2[üíª Desktop User]
                            end

                            subgraph "Frontend Layer (Next.js)"
                                F1[üé® UI Components]
                                F2[üîä Audio Processing]
                                F3[üì° API Client]
                                F4[üíæ State Management]
                                
                                F1 --> F2
                                F2 --> F3
                                F3 --> F4
                            end

                            subgraph "API Gateway Layer"
                                AG1[üåê CORS Middleware]
                                AG2[üìÅ Static Files]
                                AG3[üîí Security]
                                
                                AG1 --> AG2
                                AG2 --> AG3
                            end

                            subgraph "Backend Layer (FastAPI)"
                                B1[üí¨ Chat Service]
                                B2[üé§ Speech Service]
                                B3[üìû Call Service]
                                B4[üß† AI Integration]
                                B5[üìö Knowledge Base]
                                
                                B1 --> B4
                                B2 --> B4
                                B3 --> B4
                                B4 --> B5
                            end

                            subgraph "AI Models Layer"
                                AI1[üéØ Typhoon2 TTS]
                                AI2[üîç Emotion Detection]
                                AI3[üìù Text Processing]
                                
                                AI1 --> AI2
                                AI2 --> AI3
                            end

                            subgraph "Data Layer"
                                D1[üíæ PostgreSQL]
                                D2[üéµ Audio Storage]
                                D3[üìã Session Store]
                                D4[üîç Cache Layer]
                                
                                D1 --> D2
                                D2 --> D3
                                D3 --> D4
                            end

                            subgraph "Infrastructure Layer"
                                I1[üê≥ Docker Containers]
                                I2[‚öñÔ∏è Load Balancer]
                                I3[üìä Monitoring]
                                I4[üîê SSL/TLS]
                                
                                I1 --> I2
                                I2 --> I3
                                I3 --> I4
                            end

                            %% User interactions
                            U --> F1
                            U1 --> F1
                            U2 --> F1
                            
                            %% Frontend to API Gateway
                            F3 --> AG1
                            
                            %% API Gateway to Backend
                            AG3 --> B1
                            AG3 --> B2
                            AG3 --> B3
                            
                            %% Backend to AI Models
                            B4 --> AI1
                            B4 --> AI2
                            B4 --> AI3
                            
                            %% Backend to Data
                            B1 --> D1
                            B2 --> D2
                            B3 --> D3
                            B5 --> D1
                            
                            %% Infrastructure connections
                            I1 --> B1
                            I1 --> B2
                            I1 --> B3
                            I2 --> AG1
                            I4 --> AG1

                            %% Styling
                            classDef userLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px
                            classDef frontendLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
                            classDef apiLayer fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
                            classDef backendLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
                            classDef aiLayer fill:#fce4ec,stroke:#880e4f,stroke-width:2px
                            classDef dataLayer fill:#e0f2f1,stroke:#004d40,stroke-width:2px
                            classDef infraLayer fill:#f1f8e9,stroke:#33691e,stroke-width:2px

                            class U,U1,U2 userLayer
                            class F1,F2,F3,F4 frontendLayer
                            class AG1,AG2,AG3 apiLayer
                            class B1,B2,B3,B4,B5 backendLayer
                            class AI1,AI2,AI3 aiLayer
                            class D1,D2,D3,D4 dataLayer
                            class I1,I2,I3,I4 infraLayer
                    </div>
                    
                    <div class="description">
                        <h4>üéØ Key Features:</h4>
                        <ul>
                            <li><strong>User Layer:</strong> ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ</li>
                            <li><strong>Frontend:</strong> Next.js + React ‡∏û‡∏£‡πâ‡∏≠‡∏° Audio Processing</li>
                            <li><strong>Backend:</strong> FastAPI ‡∏û‡∏£‡πâ‡∏≠‡∏° AI Integration</li>
                            <li><strong>AI Models:</strong> Typhoon2 TTS + Emotion Detection</li>
                            <li><strong>Infrastructure:</strong> Docker + GPU Support + Load Balancing</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Components Tab -->
            <div id="components" class="tab-content">
                <div class="diagram-section">
                    <h2>üß© Frontend Components Flow</h2>
                    <p>‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á React Components ‡πÅ‡∏•‡∏∞ State Management</p>
                    <div class="mermaid">
                        graph LR
                            subgraph "Frontend Components"
                                P[üìÑ Page.tsx]
                                CM[üí¨ ChatMessage]
                                ST[üé§ SpeechToText]
                                TC[üìû TwoWayCall]
                                SB[üîò SuggestionButtons]
                                HM[‚úèÔ∏è HITLModal]
                                
                                P --> CM
                                P --> ST
                                P --> TC
                                P --> SB
                                P --> HM
                            end
                            
                            subgraph "State Management"
                                S1[üìù Messages State]
                                S2[üéµ Audio State]
                                S3[üîç Suggestions State]
                                S4[üì± UI State]
                                
                                P --> S1
                                P --> S2
                                P --> S3
                                P --> S4
                            end
                            
                            subgraph "API Integration"
                                API[üåê API Client]
                                CH[üí¨ Chat API]
                                SP[üé§ Speech API]
                                CL[üìû Call API]
                                
                                API --> CH
                                API --> SP
                                API --> CL
                            end
                            
                            CM --> API
                            ST --> API
                            TC --> API
                            SB --> API
                            HM --> API
                    </div>
                    
                    <div class="diagram-section">
                        <h3>üîß Backend Services Flow</h3>
                        <div class="mermaid">
                            graph TB
                                subgraph "FastAPI Application"
                                    APP[üöÄ Main App]
                                    MW[üîí Middleware]
                                    RT[üõ£Ô∏è Routes]
                                    
                                    APP --> MW
                                    MW --> RT
                                end
                                
                                subgraph "Core Services"
                                    CS1[üí¨ Chat Service]
                                    CS2[üé§ Speech Service]
                                    CS3[üìû Call Service]
                                    CS4[üë§ User Service]
                                    
                                    RT --> CS1
                                    RT --> CS2
                                    RT --> CS3
                                    RT --> CS4
                                end
                                
                                subgraph "AI Integration"
                                    TTS[üéØ Typhoon2 TTS]
                                    ED[üîç Emotion Detection]
                                    KB[üìö Knowledge Base]
                                    
                                    CS1 --> TTS
                                    CS1 --> ED
                                    CS1 --> KB
                                    CS2 --> TTS
                                    CS3 --> TTS
                                end
                                
                                subgraph "Data Processing"
                                    DP1[üéµ Audio Processing]
                                    DP2[üìù Text Processing]
                                    DP3[üíæ File Management]
                                    
                                    TTS --> DP1
                                    ED --> DP2
                                    CS2 --> DP3
                                end
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Data Flow Tab -->
            <div id="flow" class="tab-content">
                <div class="diagram-section">
                    <h2>üîÑ Data Flow Architecture</h2>
                    <p>‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Real-time Communication Flow</p>
                    <div class="mermaid">
                        sequenceDiagram
                            participant U as User
                            participant F as Frontend
                            participant B as Backend
                            participant AI as AI Models
                            participant D as Database
                            
                            U->>F: Input Text/Audio
                            F->>B: API Request
                            B->>AI: Process with AI
                            AI->>B: AI Response
                            B->>D: Store Data
                            D->>B: Data Confirmation
                            B->>F: API Response
                            F->>U: Display Result
                            
                            Note over U,D: Real-time Communication Flow
                    </div>
                    
                    <div class="description">
                        <h4>üìä Flow Description:</h4>
                        <ol>
                            <li><strong>User Input:</strong> ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á</li>
                            <li><strong>Frontend Processing:</strong> ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á API Request</li>
                            <li><strong>Backend Processing:</strong> ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ AI Models ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•</li>
                            <li><strong>AI Response:</strong> ‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å AI Models</li>
                            <li><strong>Data Storage:</strong> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</li>
                            <li><strong>Response:</strong> ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á Frontend</li>
                            <li><strong>Display:</strong> ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <!-- Deployment Tab -->
            <div id="deployment" class="tab-content">
                <div class="diagram-section">
                    <h2>üöÄ Production Deployment Architecture</h2>
                    <p>‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£ Deploy ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ô Production Environment ‡∏û‡∏£‡πâ‡∏≠‡∏° Load Balancing</p>
                    <div class="mermaid">
                        graph TB
                            subgraph "Production Environment"
                                LB[‚öñÔ∏è Load Balancer]
                                
                                subgraph "Frontend Cluster"
                                    F1[üåê Frontend 1]
                                    F2[üåê Frontend 2]
                                    F3[üåê Frontend 3]
                                end
                                
                                subgraph "Backend Cluster"
                                    B1[üîß Backend 1]
                                    B2[üîß Backend 2]
                                    B3[üîß Backend 3]
                                end
                                
                                subgraph "AI Models Cluster"
                                    AI1[üß† AI Model 1]
                                    AI2[üß† AI Model 2]
                                end
                                
                                subgraph "Database Cluster"
                                    DB1[üíæ Primary DB]
                                    DB2[üíæ Replica DB]
                                    CACHE[üî• Redis Cache]
                                end
                                
                                LB --> F1
                                LB --> F2
                                LB --> F3
                                
                                F1 --> B1
                                F2 --> B2
                                F3 --> B3
                                
                                B1 --> AI1
                                B2 --> AI2
                                B3 --> AI1
                                
                                B1 --> DB1
                                B2 --> DB2
                                B3 --> CACHE
                            end
                    </div>
                    
                    <div class="description">
                        <h4>üöÄ Deployment Features:</h4>
                        <ul>
                            <li><strong>Load Balancing:</strong> ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏õ‡∏¢‡∏±‡∏á Frontend ‡πÅ‡∏•‡∏∞ Backend instances</li>
                            <li><strong>Horizontal Scaling:</strong> ‡πÄ‡∏û‡∏¥‡πà‡∏° instances ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</li>
                            <li><strong>High Availability:</strong> ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏°‡πâ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß</li>
                            <li><strong>Database Clustering:</strong> Primary + Replica + Cache</li>
                            <li><strong>AI Model Distribution:</strong> ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢ AI models ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏•‡∏≤‡∏¢ instances</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Technology Tab -->
            <div id="tech" class="tab-content">
                <div class="tech-stack">
                    <div class="tech-card">
                        <h4>üé® Frontend Technology</h4>
                        <ul>
                            <li><strong>Framework:</strong> Next.js 14 with TypeScript</li>
                            <li><strong>UI Library:</strong> React 18</li>
                            <li><strong>Styling:</strong> Tailwind CSS</li>
                            <li><strong>State Management:</strong> React Hooks + Context API</li>
                            <li><strong>Audio Processing:</strong> Web Audio API, MediaRecorder</li>
                        </ul>
                    </div>
                    
                    <div class="tech-card">
                        <h4>üîß Backend Technology</h4>
                        <ul>
                            <li><strong>Framework:</strong> FastAPI (Python)</li>
                            <li><strong>AI Models:</strong> Typhoon2-Audio for TTS</li>
                            <li><strong>Audio Processing:</strong> soundfile, numpy, wave</li>
                            <li><strong>API Documentation:</strong> OpenAPI/Swagger</li>
                            <li><strong>CORS:</strong> Configurable origins</li>
                        </ul>
                    </div>
                    
                    <div class="tech-card">
                        <h4>üê≥ Infrastructure</h4>
                        <ul>
                            <li><strong>Containerization:</strong> Docker + Docker Compose</li>
                            <li><strong>GPU Support:</strong> NVIDIA CUDA runtime</li>
                            <li><strong>Static Files:</strong> FastAPI StaticFiles</li>
                            <li><strong>Environment:</strong> Configurable via environment variables</li>
                            <li><strong>Load Balancing:</strong> Nginx (planned)</li>
                        </ul>
                    </div>
                    
                    <div class="tech-card">
                        <h4>üíæ Data Storage</h4>
                        <ul>
                            <li><strong>Database:</strong> PostgreSQL (planned)</li>
                            <li><strong>File Storage:</strong> Local file system</li>
                            <li><strong>Caching:</strong> In-memory + Redis (planned)</li>
                            <li><strong>Session Management:</strong> Local storage + server-side</li>
                            <li><strong>Audio Files:</strong> WAV/MP3 format support</li>
                        </ul>
                    </div>
                </div>
                
                <div class="diagram-section">
                    <h3>üîí Security Features</h3>
                    <div class="description">
                        <ul>
                            <li><strong>CORS Protection:</strong> Configurable allowed origins</li>
                            <li><strong>File Upload Validation:</strong> Audio file type checking</li>
                            <li><strong>Input Sanitization:</strong> Text input validation</li>
                            <li><strong>Audio Processing:</strong> Secure local processing</li>
                            <li><strong>API Rate Limiting:</strong> Planned implementation</li>
                        </ul>
                    </div>
                </div>
                
                <div class="diagram-section">
                    <h3>üìä Performance Characteristics</h3>
                    <div class="description">
                        <ul>
                            <li><strong>TTS Generation:</strong> &lt; 2 seconds per sentence</li>
                            <li><strong>API Response:</strong> &lt; 500ms average</li>
                            <li><strong>Audio Quality:</strong> 16kHz, 16-bit WAV format</li>
                            <li><strong>Real-time Processing:</strong> WebSocket support (planned)</li>
                            <li><strong>Scalability:</strong> Horizontal scaling ready</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                useMaxWidth: true,
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35,
                mirrorActors: true,
                bottomMarginAdj: 1,
                useMaxWidth: true,
                rightAngles: false,
                showSequenceNumbers: false
            }
        });

        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Re-render mermaid diagrams in the active tab
            setTimeout(() => {
                mermaid.init(undefined, document.querySelector('.tab-content.active .mermaid'));
            }, 100);
        }

        // Auto-resize diagrams on window resize
        window.addEventListener('resize', () => {
            setTimeout(() => {
                mermaid.init(undefined, document.querySelector('.tab-content.active .mermaid'));
            }, 200);
        });
    </script>
</body>
</html>

